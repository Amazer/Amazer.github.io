---
title: '[引擎笔记]之五：GDI基本文本显示'
toc: true
copyright: true
date: 2018-04-15 16:38:39
tags: ['引擎笔记','笔记']

---

### 1.使用到的函数总结
#### 1. TextOut(): 定点显示字符串

<!--more-->

```
BOOL TextOut(HDC hdc,           // 设备描述信息
        int nXStart,            // 显示字符串的x位置
        int nYStart,            // 显示字符串的y位置
        LPCTSTR lpString,       // 显示的字符串
        int cbString);          // 显示的长度
```

eg.
```
	LPCTSTR str = "Hello Word!!!";
	TextOut(hdc, 100, 100, str, strlen(str));
```

#### 2. DrawText(): 矩形框内显示字符串
```
int DrawText(HDC hdc,       // 设备描述信息
    LPCTSTR lpString,       // 字符串
    int nCount,             // 显示长度
    LPRECT lpRect,          // 显示区域
    UINT uFormat,           // 标记
```

#### 3. SetTextColor():设置文字颜色
```
// 返回之前的颜色值
COLORREF SetTextColor(HDC hdc,      // 设备描述信息
    COLORREF color);                // 设置颜色
```

eg.
```
COLORREF old_col = SetTextColor(hdc,RGB(0,255,0));
```

#### 4. SetBkColor():设置背景颜色
```
// 返回之前的背景颜色值
COLORREF SetBkColor(HDC hdc,        // 设备描述信息
    COLORREF color);                // 设置颜色
```
eg.
```
COLORREF old_bcol = SetBkColor(hdc,RGB(0,0,0));
```

#### 5. SetBkMode()：设置背景的模式
```
int SetMkMode(HDC hdc,
    int iBkMode);           // 背景模式: TRANSPARENT/OPAQUE/
```


### 2.使用流程
1.SetTextColor/SetBkColor/SetBkMode都会返回设置之前的值。目的是方便恢复到之前的设置。
理解为绘制管线的设置

2.流程
- 1.**GetDC**
- 2.**设置**绘制管线
- 3.绘制文字
- 4.**恢复**绘制管线设置
- 5.**RleaseDC**

3.demo code:
```
COLORREF old_fcolor,old_bcolor;
int old_bkmode;

HDC hdc=GetDC(hWnd);

old_fcolor=SetTextColor(hdc,RGB(0,255,0));
old_bcolor=SetBkColor(hdc,RGB(0,0,0));
old_bkmode=SetBkMode(hdc,TRANSPARENT);

// 绘制文字
TextOut(hdc,20,30,"Hello!",strlen("Hello!"));

// 恢复设置
SetTextColor(hdc,old_fcolor);
SetBkColor(hdc,old_bcolor);
SetBkMode(hdc,old_bkmode);

Release(hWnd,hdc);
```
